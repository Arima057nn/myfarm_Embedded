<!doctype html>

<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://code.jquery.com/jquery-3.4.0.min.js"
        integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"" type=" text/javascript"
        charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js" type="text/javascript"
        charset="utf-8"></script>
    <script src="js/chart-device-data.js" type="text/javascript" charset="utf-8"></script>
    <link href="css/style.css" rel="stylesheet" />
    <script src="js/create_device.js" type="text/javascript" charset="utf-8"></script>
    <script src="data/data.js" type="module"></script>
    <!-- Bootstrap CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- jQuery library -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script> -->

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script> -->

    <title>Temperature &amp; Humidity Real-time Data</title>
</head>

<body>
    <div class="header">
        <div class="tittle">
            Hệ thống giám sát và điều khiển trang trại
        </div>>
    </div>>
    <h1 class="flexHeader" style="font-size: 2em;">
        <span>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModalCenter">
                Add device
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Input Device Information</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <!-- Form fields for input -->
                            <form>
                                <div class="form-group">
                                    <label for="inputId" style="font-size: 1rem;">ID</label>
                                    <input type="text" class="form-control" id="inputId" placeholder="Enter ID">
                                </div>
                                <div class="form-group">
                                    <label for="inputPosition" style="font-size: 1rem;">Position</label>
                                    <input type="text" class="form-control" id="inputPosition"
                                        placeholder="Enter position">
                                </div>
                                <div class="form-group">
                                    <label for="inputName" style="font-size: 1rem;">Name</label>
                                    <input type="text" class="form-control" id="inputName" placeholder="Enter name">
                                </div>
                                <div class="form-group">
                                    <label for="inputNguongTren" style="font-size: 1rem;">Nguong_tuoi_tren</label>
                                    <input type="number" class="form-control" id="inputNguongTren"
                                        placeholder="Enter nguong_tuoi_tren">
                                </div>
                                <div class="form-group">
                                    <label for="inputNguongDuoi" style="font-size: 1rem;">Nguong_tuoi_duoi</label>
                                    <input type="number" class="form-control" id="inputNguongDuoi"
                                        placeholder="Enter nguong_tuoi_duoi">
                                </div>
                                <div class="form-group">
                                    <label for="inputNguongSuoiTren" style="font-size: 1rem;">Nguong_suoi_tren</label>
                                    <input type="number" class="form-control" id="inputNguongSuoiTren"
                                        placeholder="Enter nguong_suoi_tren">
                                </div>
                                <div class="form-group">
                                    <label for="inputNguongSuoiDuoi" style="font-size: 1rem;">Nguong_suoi_duoi</label>
                                    <input type="number" class="form-control" id="inputNguongSuoiDuoi"
                                        placeholder="Enter nguong_suoi_duoi">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" id="saveChangesBtn">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </span>

        <span id="deviceCount">0 devices</span>
        <select id="listOfDevices" class="select_box"></select>
        Tưới nước: <input type="checkbox" id="autoSelect">
        Bật đèn: <input type="checkbox" id="autoSelect2">
        </span>
        <span>Temperature & Humidity Real-time Data</span>
    </h1>
    <div class="wrapper">
        <div class="chart">
            <canvas id="iotChart"></canvas>
        </div>
        <div id="table">
            <div id="info">

            </div>
        </div>
    </div>

</body>


</html>



  <!-- Nhúng các tập tin JS cần thiết -->
  <script src="data/data.js"></script>
  <script>

// Lấy các trường input trong modal
const inputId = document.getElementById('inputId');
const inputPosition = document.getElementById('inputPosition');
const inputName = document.getElementById('inputName');
const inputNguongTren = document.getElementById('inputNguongTren');
const inputNguongDuoi = document.getElementById('inputNguongDuoi');
const inputNguongSuoiTren = document.getElementById('inputNguongSuoiTren');
const inputNguongSuoiDuoi = document.getElementById('inputNguongSuoiDuoi');

// Lấy button "Save changes" trong modal
const saveChangesBtn = document.querySelector('#saveChangesBtn');

// Xử lý sự kiện khi nhấn nút "Save changes"
saveChangesBtn.addEventListener('click', function() {
// Tạo một đối tượng mới từ thông tin nhập vào
const deviceItem = {
  id: inputId.value,
  position: inputPosition.value,
  name: inputName.value,
  nguong_tuoi_tren: parseFloat(inputNguongTren.value),
  nguong_tuoi_duoi: parseFloat(inputNguongDuoi.value),
  nguong_suoi_tren: parseFloat(inputNguongSuoiTren.value),
  nguong_suoi_duoi: parseFloat(inputNguongSuoiDuoi.value),
};

// Thêm đối tượng deviceItem vào mảng devices
console.log(deviceItem);
devices.push(deviceItem);
console.log(devices);
// Đóng modal
//   $('#exampleModalCenter').modal('hide');
});

// Function để hiển thị thông báo "Đã nhập thông tin thiết bị thành công !"
function showSuccessAlert() {
alert('Đã nhập thông tin thiết bị thành công !');
}

// Gọi function showSuccessAlert khi nhấn nút "Save changes"
saveChangesBtn.addEventListener('click', showSuccessAlert);

  </script>